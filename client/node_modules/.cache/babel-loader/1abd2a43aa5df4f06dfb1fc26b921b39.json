{"ast":null,"code":"import _toConsumableArray from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import language from\"../../properties/language\";import{UserContext}from\"../../context/userContext\";import QuestionsItem from\"../../components/questionItem\";import{endpoint}from\"../../api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Questions=/*#__PURE__*/function(_Component){_inherits(Questions,_Component);var _super=_createSuper(Questions);function Questions(props){var _this;_classCallCheck(this,Questions);_this=_super.call(this,props);_this.changeInputValue=function(e,idx){var newQuestions=_toConsumableArray(_this.state.questions);var question=newQuestions.findIndex(function(q){return q._id===idx;});//newQuestions[question].question = e.target.value;\nnewQuestions[question].question=e.target.value;_this.setState({questions:_toConsumableArray(newQuestions)});};_this.allQuestions=function(){console.log(\"inside\");_this.setState({questions:[]});axios.get(endpoint.allQuestions).then(function(res){console.log(res.data);_this.setState({questions:res.data});var newFilters=[];res.data.map(function(filter){return newFilters.push(filter.area);});var unique=_toConsumableArray(new Set(newFilters));_this.setState({filtersData:_toConsumableArray(unique)});});};_this.FilterQuestions=function(filter){console.log(filter);_this.setState({questions:[]});axios.post(endpoint.filteredQuestions,{data:filter}).then(function(res){_this.setState({filteredQuestions:res.data});});};_this.state={questions:[],filteredQuestions:[],schools:[],filtersData:[],selectBox:\"allQuestion\"};return _this;}_createClass(Questions,[{key:\"componentDidMount\",value:function componentDidMount(){this.allQuestions();console.log(this.context.school);this.FilterQuestions(this.context.school);}},{key:\"render\",value:// handleChange = (e) => {\n//   if (e.target.value !== \"Select filter\") {\n//     console.log(\"not select filter\");\n//     this.FilterQuestions(e.target.value);\n//     this.setState({ selectBox: e.target.value });\n//   } else {\n//     console.log(\"select filter\");\n//     this.allQuestions();\n//     this.setState({ selectBox: \"allQuestion\" });\n//   }\n// };\nfunction render(){var _this2=this;return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",flexDirection:\"column\",maxWidth:500,marginLeft:\"auto\",marginRight:\"auto\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",alignItems:\"center\",marginTop:20,backgroundColor:\"rgba(255, 255, 255, 0.829)\"}}),/*#__PURE__*/_jsx(\"form\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"formQuestions\",children:this.state.questions&&React.Children.toArray(this.state.filteredQuestions.map(function(question){return/*#__PURE__*/_jsx(QuestionsItem,{question:question,refreshQuestions:function refreshQuestions(){//   this.state.selectBox === \"allQuestion\"\n//     ? this.allQuestions()\n//     : this.FilterQuestions(this.state.selectBox);\n_this2.FilterQuestions(_this2.context.school);}});}))})})]});}}]);return Questions;}(Component);Questions.contextType=UserContext;export default Questions;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/questions/index.jsx"],"names":["React","Component","axios","language","UserContext","QuestionsItem","endpoint","Questions","props","changeInputValue","e","idx","newQuestions","state","questions","question","findIndex","q","_id","target","value","setState","allQuestions","console","log","get","then","res","data","newFilters","map","filter","push","area","unique","Set","filtersData","FilterQuestions","post","filteredQuestions","schools","selectBox","context","school","display","justifyContent","flexDirection","maxWidth","marginLeft","marginRight","alignItems","marginTop","backgroundColor","Children","toArray","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport language from \"../../properties/language\";\r\nimport { UserContext } from \"../../context/userContext\";\r\n\r\nimport QuestionsItem from \"../../components/questionItem\";\r\nimport { endpoint } from \"../../api\";\r\n\r\nclass Questions extends Component {\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      questions: [],\r\n      filteredQuestions: [],\r\n      schools: [],\r\n      filtersData: [],\r\n      selectBox: \"allQuestion\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.allQuestions();\r\n    console.log(this.context.school);\r\n    this.FilterQuestions(this.context.school);\r\n  }\r\n\r\n  changeInputValue = (e, idx) => {\r\n    let newQuestions = [...this.state.questions];\r\n    let question = newQuestions.findIndex((q) => q._id === idx);\r\n    //newQuestions[question].question = e.target.value;\r\n    newQuestions[question].question = e.target.value;\r\n    this.setState({ questions: [...newQuestions] });\r\n  };\r\n\r\n  allQuestions = () => {\r\n    console.log(\"inside\");\r\n    this.setState({ questions: [] });\r\n    axios.get(endpoint.allQuestions).then((res) => {\r\n      console.log(res.data);\r\n      this.setState({ questions: res.data });\r\n      let newFilters = [];\r\n      res.data.map((filter) => newFilters.push(filter.area));\r\n      let unique = [...new Set(newFilters)];\r\n      this.setState({ filtersData: [...unique] });\r\n    });\r\n  };\r\n\r\n  FilterQuestions = (filter) => {\r\n    console.log(filter);\r\n    this.setState({ questions: [] });\r\n    axios.post(endpoint.filteredQuestions, { data: filter }).then((res) => {\r\n      this.setState({ filteredQuestions: res.data });\r\n    });\r\n  };\r\n\r\n  // handleChange = (e) => {\r\n  //   if (e.target.value !== \"Select filter\") {\r\n  //     console.log(\"not select filter\");\r\n  //     this.FilterQuestions(e.target.value);\r\n  //     this.setState({ selectBox: e.target.value });\r\n  //   } else {\r\n  //     console.log(\"select filter\");\r\n  //     this.allQuestions();\r\n  //     this.setState({ selectBox: \"allQuestion\" });\r\n  //   }\r\n  // };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n        }}\r\n      >\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            marginTop: 20,\r\n            backgroundColor: \"rgba(255, 255, 255, 0.829)\",\r\n          }}\r\n        >\r\n          {/* <span className=\"filterCandidateLabel\">\r\n            {language.filterCandidateLabel[this.context.language]}\r\n          </span> */}\r\n          {/* <select className=\"questionsSelectBox\" onChange={this.handleChange}>\r\n            <option value=\"Select filter\">Select filter</option>\r\n            {this.state.filtersData &&\r\n              React.Children.toArray(\r\n                this.state.filtersData.map((filter) => (\r\n                  <option value={filter}>{filter}</option>\r\n                ))\r\n              )}\r\n          </select> */}\r\n        </div>\r\n\r\n        <form>\r\n          <div className=\"formQuestions\">\r\n            {this.state.questions &&\r\n              React.Children.toArray(\r\n                this.state.filteredQuestions.map((question) => (\r\n                  <QuestionsItem\r\n                    question={question}\r\n                    refreshQuestions={() => {\r\n                      //   this.state.selectBox === \"allQuestion\"\r\n                      //     ? this.allQuestions()\r\n                      //     : this.FilterQuestions(this.state.selectBox);\r\n                      this.FilterQuestions(this.context.school);\r\n                    }}\r\n                  />\r\n                ))\r\n              )}\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Questions;\r\n"]},"metadata":{},"sourceType":"module"}
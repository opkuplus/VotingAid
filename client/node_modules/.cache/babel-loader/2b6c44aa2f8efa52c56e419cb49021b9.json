{"ast":null,"code":"import _objectSpread from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{UserContext}from\"../../context/userContext\";import{Link}from\"react-router-dom\";import axios from\"axios\";import Picture from\"../../components/partials/picture\";import Upload from\"../../components/upload\";import Swal from\"sweetalert2\";import language from\"../../properties/language\";import DefaultButton from\"../../components/defaultButton\";import{DARK_GREEN,GREEN,WHITE}from\"../../helpers/constants\";import{endpoint}from\"../../api\";import DefaultInput from\"../../components/defaultInput\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=/*#__PURE__*/function(_Component){_inherits(Profile,_Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.fetchData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var email;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:email=_this.context.email;if(_this.props.location.data!=null){email=_this.props.location.data;}_context.next=4;return axios.post(endpoint.profile,{email:email}).then(function(res){_this.setState({profile:res.data});}).catch(function(err){console.log(err);});case 4:case\"end\":return _context.stop();}}},_callee);}));_this.updatePicture=function(){// console.log(data);\n// this.setState((state) => ({\n//   ...state,\n//   profile: {\n//     ...state.profile,\n//     image: data,\n//   },\n// }));\n_this.fetchData();};_this.componentDidMount=function(){_this.fetchData();};_this.submitData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"state\");console.log(_this.state.profile);_context2.next=4;return axios.post(endpoint.editInformation,{data:_this.state.profile}).then(function(res){Swal.fire({title:language.changeProfileDataAlert[_this.context.language],icon:\"success\"});_this.setState({profile:res.data});}).catch(function(err){console.log(err);});case 4:case\"end\":return _context2.stop();}}},_callee2);}));_this.onChange=function(e){var target=e.target;_this.setState(function(prevState){var profile=_objectSpread({},prevState.profile);profile[target.id]=target.value;console.log(profile);return{profile:profile};});};_this.state={profile:{},filename:null};return _this;}_createClass(Profile,[{key:\"render\",value:// };\nfunction render(){var _this2=this;var profile=this.state.profile;//console.log(profile);\nif(!profile){return null;}var information=[{value:profile.name,key:this.state.profile.name,id:\"name\",placeholder:language.firstName[this.context.language]},{value:profile.surname,id:\"surname\",placeholder:language.surName[this.context.language]},{value:profile.school,id:\"school\",placeholder:language.school[this.context.language]},{value:profile.studentAssociation,id:\"studentAssociation\",placeholder:language.selectStudentAssociationList[this.context.language]},{value:profile.description,id:\"description\",placeholder:language.description[this.context.language]},{value:profile.campus,id:\"campus\",placeholder:language.campus[this.context.language]}];return/*#__PURE__*/_jsx(\"div\",{className:\"homeScreen\",style:{display:\"flex\",justifyContent:\"center\",flexDirection:\"column\",maxWidth:500,marginLeft:\"auto\",marginRight:\"auto\"},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.submitData,children:[/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"center\",marginBottom:10},children:profile.image&&/*#__PURE__*/_jsx(\"div\",{style:{width:100,height:120,objectFit:\"contain\",overflow:\"hidden\",borderRadius:\"50%\"},children:/*#__PURE__*/_jsx(Picture,{source:profile.image,style:{width:\"100%\"}})})}),information&&React.Children.toArray(information.map(function(info){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DefaultInput,{label:info.placeholder,type:\"text\",name:\"password\",value:info.value,onChange:_this2.onChange,className:\"profileInput\",id:info.id,required:true})});})),/*#__PURE__*/_jsx(Upload,{email:profile.email,onUpload:this.updatePicture,profile:this.state.profile}),/*#__PURE__*/_jsx(DefaultButton,{type:\"submit\",borderColor:DARK_GREEN,backgroundColor:GREEN,textColor:WHITE,text:language.updateButton[this.context.language]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(Link,{to:{pathname:\"/Form/\"+profile.studentAssociation,email:profile.email},children:language.formLink[this.context.language]}),/*#__PURE__*/_jsx(\"br\",{})]})});}}]);return Profile;}(Component);Profile.contextType=UserContext;export default Profile;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/profile/index.jsx"],"names":["React","Component","UserContext","Link","axios","Picture","Upload","Swal","language","DefaultButton","DARK_GREEN","GREEN","WHITE","endpoint","DefaultInput","Profile","props","fetchData","email","context","location","data","post","profile","then","res","setState","catch","err","console","log","updatePicture","componentDidMount","submitData","state","editInformation","fire","title","changeProfileDataAlert","icon","onChange","e","target","prevState","id","value","filename","information","name","key","placeholder","firstName","surname","surName","school","studentAssociation","selectStudentAssociationList","description","campus","display","justifyContent","flexDirection","maxWidth","marginLeft","marginRight","marginBottom","image","width","height","objectFit","overflow","borderRadius","Children","toArray","map","info","updateButton","pathname","formLink","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport Picture from \"../../components/partials/picture\";\r\nimport Upload from \"../../components/upload\";\r\nimport Swal from \"sweetalert2\";\r\nimport language from \"../../properties/language\";\r\nimport DefaultButton from \"../../components/defaultButton\";\r\nimport { DARK_GREEN, GREEN, WHITE } from \"../../helpers/constants\";\r\nimport { endpoint } from \"../../api\";\r\nimport DefaultInput from \"../../components/defaultInput\";\r\n\r\nclass Profile extends Component {\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      profile: {},\r\n      filename: null,\r\n    };\r\n  }\r\n\r\n  fetchData = async () => {\r\n    let email = this.context.email;\r\n    if (this.props.location.data != null) {\r\n      email = this.props.location.data;\r\n    }\r\n    await axios\r\n      .post(endpoint.profile, { email: email })\r\n      .then((res) => {\r\n        this.setState({ profile: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updatePicture = () => {\r\n    // console.log(data);\r\n    // this.setState((state) => ({\r\n    //   ...state,\r\n    //   profile: {\r\n    //     ...state.profile,\r\n    //     image: data,\r\n    //   },\r\n    // }));\r\n    this.fetchData();\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    this.fetchData();\r\n  };\r\n\r\n  submitData = async () => {\r\n    console.log(\"state\");\r\n    console.log(this.state.profile);\r\n    await axios\r\n      .post(endpoint.editInformation, { data: this.state.profile })\r\n      .then((res) => {\r\n        Swal.fire({\r\n          title: language.changeProfileDataAlert[this.context.language],\r\n          icon: \"success\",\r\n        });\r\n        this.setState({ profile: res.data });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  //componentDidUpdate = () => {\r\n  onChange = (e) => {\r\n    let target = e.target;\r\n    this.setState((prevState) => {\r\n      let profile = { ...prevState.profile };\r\n      profile[target.id] = target.value;\r\n      console.log(profile);\r\n      return { profile };\r\n    });\r\n  };\r\n  // };\r\n\r\n  render() {\r\n    const { profile } = this.state;\r\n    //console.log(profile);\r\n    if (!profile) {\r\n      return null;\r\n    }\r\n    let information = [\r\n      {\r\n        value: profile.name,\r\n        key: this.state.profile.name,\r\n        id: \"name\",\r\n        placeholder: language.firstName[this.context.language],\r\n      },\r\n      {\r\n        value: profile.surname,\r\n        id: \"surname\",\r\n        placeholder: language.surName[this.context.language],\r\n      },\r\n      {\r\n        value: profile.school,\r\n        id: \"school\",\r\n        placeholder: language.school[this.context.language],\r\n      },\r\n      {\r\n        value: profile.studentAssociation,\r\n        id: \"studentAssociation\",\r\n        placeholder:\r\n          language.selectStudentAssociationList[this.context.language],\r\n      },\r\n      {\r\n        value: profile.description,\r\n        id: \"description\",\r\n        placeholder: language.description[this.context.language],\r\n      },\r\n      {\r\n        value: profile.campus,\r\n        id: \"campus\",\r\n        placeholder: language.campus[this.context.language],\r\n      },\r\n    ];\r\n    return (\r\n      <div\r\n        className=\"homeScreen\"\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n        }}\r\n      >\r\n        <form onSubmit={this.submitData}>\r\n          <div\r\n            style={{\r\n              display: \"flex\",\r\n              justifyContent: \"center\",\r\n              marginBottom: 10,\r\n            }}\r\n          >\r\n            {profile.image && (\r\n              <div\r\n                style={{\r\n                  width: 100,\r\n                  height: 120,\r\n                  objectFit: \"contain\",\r\n                  overflow: \"hidden\",\r\n                  borderRadius: \"50%\",\r\n                }}\r\n              >\r\n                <Picture source={profile.image} style={{ width: \"100%\" }} />\r\n              </div>\r\n            )}\r\n          </div>\r\n          {information &&\r\n            React.Children.toArray(\r\n              information.map((info) => (\r\n                <div>\r\n                  <DefaultInput\r\n                    label={info.placeholder}\r\n                    type=\"text\"\r\n                    name=\"password\"\r\n                    value={info.value}\r\n                    onChange={this.onChange}\r\n                    className=\"profileInput\"\r\n                    id={info.id}\r\n                    required\r\n                  />\r\n                </div>\r\n              ))\r\n            )}\r\n          {/* <FileUpload\r\n            email={profile.email}\r\n            onUpload={this.updatePicture}\r\n          ></FileUpload> */}\r\n          <Upload\r\n            email={profile.email}\r\n            onUpload={this.updatePicture}\r\n            profile={this.state.profile}\r\n          ></Upload>\r\n          <DefaultButton\r\n            type=\"submit\"\r\n            borderColor={DARK_GREEN}\r\n            backgroundColor={GREEN}\r\n            textColor={WHITE}\r\n            text={language.updateButton[this.context.language]}\r\n          />\r\n          <hr />\r\n          <Link\r\n            to={{\r\n              pathname: \"/Form/\" + profile.studentAssociation,\r\n              email: profile.email,\r\n            }}\r\n          >\r\n            {language.formLink[this.context.language]}\r\n          </Link>\r\n          <br />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}
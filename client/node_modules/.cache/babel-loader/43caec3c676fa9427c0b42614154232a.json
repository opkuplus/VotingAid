{"ast":null,"code":"import _defineProperty from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import axios from\"axios\";import{UserContext}from\"../../context/userContext\";import language from\"../../properties/language\";import{Link}from\"react-router-dom\";import Swal from\"sweetalert2\";import{endpoint}from\"../../api\";import DefaultInput from\"../../components/defaultInput\";import DefaultButton from\"../../components/defaultButton\";import{DARK_GREEN,GREEN,WHITE}from\"../../helpers/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.handleSubmit=function(event){event.preventDefault();var user={email:_this.state.email,password:_this.state.password};axios.post(endpoint.login,user).then(function(res){console.log(res);if(res){var changeUser=_this.context.changeUser;changeUser(res.data.tokenUser.status,res.data.tokenUser.email,res.data.tokenUser.school,true,res.data.token);if(!_this.context.user||!_this.context.email){changeUser(\"Quest\",\"\",\"\",false,_this.context.language);Swal.fire({icon:\"error\",title:\"ERROR\",text:language.wrongPasswordHolder[_this.context.language]});}else{Swal.fire({title:language.loginHolder[_this.context.language],icon:\"success\",confirmButtonText:\"Confirm\"});/*sessionStorage.setItem(\"email\", this.context.email);\r\n          sessionStorage.setItem(\"status\", this.context.user);*/sessionStorage.setItem(\"language\",_this.context.language);sessionStorage.setItem(\"token\",_this.context.token);_this.props.history.push({pathname:\"/\"});}}});};_this.state={};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"handleChange\",value:function handleChange(event){this.setState(_defineProperty({},event.target.name,event.target.value));}},{key:\"render\",value:function render(){var changeUser=this.context.changeUser;return/*#__PURE__*/_jsxs(\"div\",{className:\"homeScreen\",style:{display:\"flex\",justifyContent:\"center\",flexDirection:\"column\",maxWidth:800,marginLeft:\"auto\",marginRight:\"auto\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\"},children:language.loginTitle[this.context.language]}),/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:language.loginPageDescription[this.context.language]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(DefaultInput,{label:language.emailPlaceHolder[this.context.language],type:\"email\",name:\"email\",value:this.state.email,onChange:this.handleChange,required:true}),/*#__PURE__*/_jsx(DefaultInput,{label:language.passwordPlaceHolder[this.context.language],type:\"password\",name:\"password\",value:this.state.password,onChange:this.handleChange,required:true}),/*#__PURE__*/_jsx(DefaultButton,{type:\"submit\",text:language.loginButton[this.context.language],borderColor:DARK_GREEN,backgroundColor:GREEN,textColor:WHITE}),/*#__PURE__*/_jsxs(Link,{to:{pathname:\"/\"},children:[\" \",language.mainPageLink[this.context.language],\" \"]}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]})]});}}]);return Login;}(Component);Login.contextType=UserContext;export default Login;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/login/index.jsx"],"names":["React","Component","axios","UserContext","language","Link","Swal","endpoint","DefaultInput","DefaultButton","DARK_GREEN","GREEN","WHITE","Login","props","handleSubmit","event","preventDefault","user","email","state","password","post","login","then","res","console","log","changeUser","context","data","tokenUser","status","school","token","fire","icon","title","text","wrongPasswordHolder","loginHolder","confirmButtonText","sessionStorage","setItem","history","push","pathname","bind","handleChange","setState","target","name","value","display","justifyContent","flexDirection","maxWidth","marginLeft","marginRight","textAlign","loginTitle","loginPageDescription","emailPlaceHolder","passwordPlaceHolder","loginButton","mainPageLink","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport language from \"../../properties/language\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport { endpoint } from \"../../api\";\r\nimport DefaultInput from \"../../components/defaultInput\";\r\nimport DefaultButton from \"../../components/defaultButton\";\r\nimport { DARK_GREEN, GREEN, WHITE } from \"../../helpers/constants\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const user = {\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    };\r\n\r\n    axios.post(endpoint.login, user).then((res) => {\r\n      console.log(res);\r\n      if (res) {\r\n        const { changeUser } = this.context;\r\n        changeUser(\r\n          res.data.tokenUser.status,\r\n          res.data.tokenUser.email,\r\n          res.data.tokenUser.school,\r\n          true,\r\n          res.data.token\r\n        );\r\n        if (!this.context.user || !this.context.email) {\r\n          changeUser(\"Quest\", \"\", \"\", false, this.context.language);\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"ERROR\",\r\n            text: language.wrongPasswordHolder[this.context.language],\r\n          });\r\n        } else {\r\n          Swal.fire({\r\n            title: language.loginHolder[this.context.language],\r\n            icon: \"success\",\r\n            confirmButtonText: \"Confirm\",\r\n          });\r\n          /*sessionStorage.setItem(\"email\", this.context.email);\r\n          sessionStorage.setItem(\"status\", this.context.user);*/\r\n          sessionStorage.setItem(\"language\", this.context.language);\r\n          sessionStorage.setItem(\"token\", this.context.token);\r\n          this.props.history.push({\r\n            pathname: \"/\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  static contextType = UserContext;\r\n\r\n  render() {\r\n    const { changeUser } = this.context;\r\n    return (\r\n      <div\r\n        className=\"homeScreen\"\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n          maxWidth: 800,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n        }}\r\n      >\r\n\t\t<h1 style={{ textAlign: \"center\" }}>\r\n          {language.loginTitle[this.context.language]}\r\n        </h1>\r\n        <p style={{ textAlign: \"center\" }}>\r\n          {language.loginPageDescription[this.context.language]}\r\n        </p>\r\n        <form onSubmit={this.handleSubmit}>\r\n          <DefaultInput\r\n            label={language.emailPlaceHolder[this.context.language]}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={this.state.email}\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n          <DefaultInput\r\n            label={language.passwordPlaceHolder[this.context.language]}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={this.state.password}\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n          <DefaultButton\r\n            type=\"submit\"\r\n            text={language.loginButton[this.context.language]}\r\n            borderColor={DARK_GREEN}\r\n            backgroundColor={GREEN}\r\n            textColor={WHITE}\r\n          />\r\n          <Link\r\n            to={{\r\n              pathname: \"/\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            {language.mainPageLink[this.context.language]}{\" \"}\r\n          </Link>{\" \"}\r\n          <br></br>\r\n          <br></br>\r\n          {/* <p className=\"forgot-password text-right\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/newPassword\"\r\n              }}> Unohditko salasanan? </Link></p> */}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}
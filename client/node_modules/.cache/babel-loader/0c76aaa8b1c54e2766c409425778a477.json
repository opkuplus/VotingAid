{"ast":null,"code":"var _jsxFileName = \"C:\\\\Git\\\\VotingAid-1\\\\client\\\\src\\\\containers\\\\login\\\\index.jsx\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { UserContext } from \"../../context/userContext\";\nimport language from \"../../properties/language\";\nimport { Link } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nimport { endpoint } from \"../../api\";\nimport DefaultInput from \"../../components/defaultInput\";\nimport DefaultButton from \"../../components/defaultButton\";\nimport { DARK_GREEN, GREEN, WHITE } from \"../../helpers/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const user = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      axios.post(endpoint.login, user).then(res => {\n        console.log(res);\n\n        if (res) {\n          const {\n            changeUser\n          } = this.context;\n          changeUser(res.data.tokenUser.status, res.data.tokenUser.email, res.data.tokenUser.school, true, res.data.token);\n\n          if (!this.context.user || !this.context.email) {\n            changeUser(\"Quest\", \"\", \"\", false, this.context.language);\n            Swal.fire({\n              icon: \"error\",\n              title: \"ERROR\",\n              text: language.wrongPasswordHolder[this.context.language]\n            });\n          } else {\n            Swal.fire({\n              title: language.loginHolder[this.context.language],\n              icon: \"success\",\n              confirmButtonText: \"Confirm\"\n            });\n            /*sessionStorage.setItem(\"email\", this.context.email);\r\n            sessionStorage.setItem(\"status\", this.context.user);*/\n\n            sessionStorage.setItem(\"language\", this.context.language);\n            sessionStorage.setItem(\"token\", this.context.token);\n            this.props.history.push({\n              pathname: \"/\"\n            });\n          }\n        }\n      });\n    };\n\n    this.state = {};\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    const {\n      changeUser\n    } = this.context;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"homeScreen\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        maxWidth: 500,\n        marginLeft: \"auto\",\n        marginRight: \"auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(DefaultInput, {\n          label: language.emailPlaceHolder[this.context.language],\n          type: \"email\",\n          name: \"email\",\n          value: this.state.email,\n          onChange: this.handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DefaultInput, {\n          label: language.passwordPlaceHolder[this.context.language],\n          type: \"password\",\n          name: \"password\",\n          value: this.state.password,\n          onChange: this.handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          type: \"submit\",\n          text: language.loginButton[this.context.language],\n          borderColor: DARK_GREEN,\n          backgroundColor: GREEN,\n          textColor: WHITE\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: {\n            pathname: \"/\"\n          },\n          children: [\" \", language.mainPageLink[this.context.language], \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nLogin.contextType = UserContext;\nexport default Login;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/login/index.jsx"],"names":["React","Component","axios","UserContext","language","Link","Swal","endpoint","DefaultInput","DefaultButton","DARK_GREEN","GREEN","WHITE","Login","constructor","props","handleSubmit","event","preventDefault","user","email","state","password","post","login","then","res","console","log","changeUser","context","data","tokenUser","status","school","token","fire","icon","title","text","wrongPasswordHolder","loginHolder","confirmButtonText","sessionStorage","setItem","history","push","pathname","bind","handleChange","setState","target","name","value","render","display","justifyContent","flexDirection","maxWidth","marginLeft","marginRight","emailPlaceHolder","passwordPlaceHolder","loginButton","mainPageLink","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport language from \"../../properties/language\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Swal from \"sweetalert2\";\r\nimport { endpoint } from \"../../api\";\r\nimport DefaultInput from \"../../components/defaultInput\";\r\nimport DefaultButton from \"../../components/defaultButton\";\r\nimport { DARK_GREEN, GREEN, WHITE } from \"../../helpers/constants\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  }\r\n\r\n  handleSubmit = (event) => {\r\n    event.preventDefault();\r\n\r\n    const user = {\r\n      email: this.state.email,\r\n      password: this.state.password,\r\n    };\r\n\r\n    axios.post(endpoint.login, user).then((res) => {\r\n      console.log(res);\r\n      if (res) {\r\n        const { changeUser } = this.context;\r\n        changeUser(\r\n          res.data.tokenUser.status,\r\n          res.data.tokenUser.email,\r\n          res.data.tokenUser.school,\r\n          true,\r\n          res.data.token\r\n        );\r\n        if (!this.context.user || !this.context.email) {\r\n          changeUser(\"Quest\", \"\", \"\", false, this.context.language);\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"ERROR\",\r\n            text: language.wrongPasswordHolder[this.context.language],\r\n          });\r\n        } else {\r\n          Swal.fire({\r\n            title: language.loginHolder[this.context.language],\r\n            icon: \"success\",\r\n            confirmButtonText: \"Confirm\",\r\n          });\r\n          /*sessionStorage.setItem(\"email\", this.context.email);\r\n          sessionStorage.setItem(\"status\", this.context.user);*/\r\n          sessionStorage.setItem(\"language\", this.context.language);\r\n          sessionStorage.setItem(\"token\", this.context.token);\r\n          this.props.history.push({\r\n            pathname: \"/\",\r\n          });\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  static contextType = UserContext;\r\n\r\n  render() {\r\n    const { changeUser } = this.context;\r\n    return (\r\n      <div\r\n        className=\"homeScreen\"\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n        }}\r\n      >\r\n        <form onSubmit={this.handleSubmit}>\r\n          <DefaultInput\r\n            label={language.emailPlaceHolder[this.context.language]}\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={this.state.email}\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n          <DefaultInput\r\n            label={language.passwordPlaceHolder[this.context.language]}\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={this.state.password}\r\n            onChange={this.handleChange}\r\n            required\r\n          />\r\n          <DefaultButton\r\n            type=\"submit\"\r\n            text={language.loginButton[this.context.language]}\r\n            borderColor={DARK_GREEN}\r\n            backgroundColor={GREEN}\r\n            textColor={WHITE}\r\n          />\r\n          <Link\r\n            to={{\r\n              pathname: \"/\",\r\n            }}\r\n          >\r\n            {\" \"}\r\n            {language.mainPageLink[this.context.language]}{\" \"}\r\n          </Link>{\" \"}\r\n          <br></br>\r\n          <br></br>\r\n          {/* <p className=\"forgot-password text-right\">\r\n            <Link\r\n              to={{\r\n                pathname: \"/newPassword\"\r\n              }}> Unohditko salasanan? </Link></p> */}\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}
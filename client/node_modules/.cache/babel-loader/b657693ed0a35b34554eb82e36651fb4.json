{"ast":null,"code":"var _jsxFileName = \"C:\\\\Git\\\\VotingAid-1\\\\client\\\\src\\\\containers\\\\addCandidates\\\\index.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport { CSVReader } from 'react-papaparse';\nimport { UserContext } from \"../../context/userContext\";\nimport language from \"../../properties/language\";\nimport { endpoint } from '../../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst buttonRef = /*#__PURE__*/React.createRef();\n\nclass AddCandidates extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleOpenDialog = e => {\n      // Note that the ref is set async, so it might be null at some point\n      if (buttonRef.current) {\n        buttonRef.current.open(e);\n      }\n    };\n\n    this.handleOnFileLoad = (data, file) => {\n      this.setState({\n        filename: file.name\n      });\n\n      if (file.name.includes('.csv')) {\n        this.setState({\n          candidates: null\n        }); //Reset the state\n\n        this.setState({\n          candidates: data\n        });\n      } else {\n        console.log('NOT CSV');\n      }\n    };\n\n    this.handleOnError = (err, file, inputElem, reason) => {\n      console.log(err);\n    };\n\n    this.handleRemoveFile = e => {\n      // Note that the ref is set async, so it might be null at some point\n      if (buttonRef.current) {\n        buttonRef.current.removeFile(e);\n        this.setState({\n          candidates: null\n        });\n        console.log(this.state.candiates);\n      }\n    };\n\n    this.state = {\n      filename: null,\n      candidates: []\n    };\n  }\n\n  confirmSubmit() {\n    swal.fire({\n      title: 'Caution!',\n      text: language.addCandidatesCautionHolder[this.context.language],\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: language.continueHolder[this.context.language]\n    }).then(result => {\n      if (result.isConfirmed) {\n        this.handeSubmit();\n        swal.fire(language.addedCandidatesToDatabaseAlert[this.context.language]);\n      }\n    });\n  }\n\n  handeSubmit() {\n    if (this.state.filename.includes('.csv')) {\n      axios.post(endpoint.addCandidates, {\n        candidate: this.state.candidates\n      }).then(res => {\n        console.log('YEET');\n      });\n    } else {\n      alert('Cant upload a file that is not a CSV one');\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addCan\",\n      style: {\n        marginTop: 20,\n        maxWidth: 500,\n        marginLeft: \"auto\",\n        marginRight: \"auto\",\n        backgroundColor: \"#FFFFFF\",\n        padding: 15\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" \", language.manyCandidates[this.context.language]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CSVReader, {\n        ref: buttonRef,\n        onFileLoad: this.handleOnFileLoad,\n        onError: this.handleOnError,\n        onSubmit: this.handleOnSubmit,\n        noClick: true,\n        noDrag: true,\n        config: {\n          header: true\n        },\n        onRemoveFile: this.handleOnRemoveFile,\n        children: ({\n          file\n        }) => /*#__PURE__*/_jsxDEV(\"aside\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'row',\n            marginBottom: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: this.handleOpenDialog,\n            style: {\n              borderRadius: 0,\n              marginLeft: 0,\n              marginRight: 0,\n              width: '30%',\n              paddingLeft: 0,\n              paddingRight: 0\n            },\n            children: language.browseButton[this.context.language]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              borderWidth: 1,\n              borderStyle: 'solid',\n              borderColor: '#ccc',\n              height: 45,\n              lineHeight: 2.5,\n              marginTop: 5,\n              marginBottom: 5,\n              paddingLeft: 13,\n              paddingTop: 3,\n              width: '60%'\n            },\n            children: file && file.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              borderRadius: 0,\n              marginLeft: 0,\n              marginRight: 0,\n              paddingLeft: 20,\n              paddingRight: 20,\n              display: 'flex',\n              justifyContent: 'center'\n            },\n            onClick: this.handleRemoveFile,\n            children: language.removeButton[this.context.language]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.confirmSubmit.bind(this),\n        style: {\n          textAlign: \"center\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          marginLeft: \"auto\",\n          marginRight: \"auto\"\n        },\n        children: language.fillFormButton[this.context.language]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nAddCandidates.contextType = UserContext;\nexport default AddCandidates;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/addCandidates/index.js"],"names":["React","Component","axios","swal","CSVReader","UserContext","language","endpoint","buttonRef","createRef","AddCandidates","constructor","props","handleOpenDialog","e","current","open","handleOnFileLoad","data","file","setState","filename","name","includes","candidates","console","log","handleOnError","err","inputElem","reason","handleRemoveFile","removeFile","state","candiates","confirmSubmit","fire","title","text","addCandidatesCautionHolder","context","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","continueHolder","then","result","isConfirmed","handeSubmit","addedCandidatesToDatabaseAlert","post","addCandidates","candidate","res","alert","render","marginTop","maxWidth","marginLeft","marginRight","backgroundColor","padding","manyCandidates","handleOnSubmit","header","handleOnRemoveFile","display","flexDirection","marginBottom","borderRadius","width","paddingLeft","paddingRight","browseButton","borderWidth","borderStyle","borderColor","height","lineHeight","paddingTop","justifyContent","removeButton","bind","textAlign","fillFormButton","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport swal from \"sweetalert2\"\r\nimport { CSVReader } from 'react-papaparse'\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport language from \"../../properties/language\";\r\nimport { endpoint } from '../../api';\r\n\r\nconst buttonRef = React.createRef()\r\nclass AddCandidates extends Component {\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      filename: null,\r\n      candidates: [],\r\n    }\r\n  }\r\n  handleOpenDialog = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.open(e)\r\n    }\r\n  }\r\n\r\n  handleOnFileLoad = (data, file) => {\r\n    this.setState({ filename: file.name })\r\n    if (file.name.includes('.csv')) {\r\n      this.setState({ candidates: null }); //Reset the state\r\n      this.setState({ candidates: data });\r\n    }\r\n    else {\r\n      console.log('NOT CSV');\r\n    }\r\n  }\r\n\r\n  handleOnError = (err, file, inputElem, reason) => {\r\n    console.log(err)\r\n  }\r\n\r\n  handleRemoveFile = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.removeFile(e)\r\n      this.setState({ candidates: null })\r\n      console.log(this.state.candiates);\r\n    }\r\n  }\r\n\r\n  confirmSubmit() {\r\n    swal.fire({\r\n      title: 'Caution!',\r\n      text: language.addCandidatesCautionHolder[this.context.language],\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: language.continueHolder[this.context.language]\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.handeSubmit();\r\n        swal.fire(\r\n          language.addedCandidatesToDatabaseAlert[this.context.language]\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  handeSubmit() {\r\n    if (this.state.filename.includes('.csv')) {\r\n      axios.post(endpoint.addCandidates, { candidate: this.state.candidates })\r\n        .then(res => {\r\n          console.log('YEET');\r\n        });\r\n    }\r\n    else {\r\n      alert('Cant upload a file that is not a CSV one');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"addCan\"\r\n        style={{\r\n          marginTop: 20,\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n          backgroundColor: \"#FFFFFF\",\r\n          padding: 15,\r\n        }}\r\n      >\r\n        <p> {language.manyCandidates[this.context.language]}</p>\r\n        <CSVReader\r\n          ref={buttonRef}\r\n          onFileLoad={this.handleOnFileLoad}\r\n          onError={this.handleOnError}\r\n          onSubmit={this.handleOnSubmit}\r\n          noClick\r\n          noDrag\r\n          config={{ header: true }}\r\n          onRemoveFile={this.handleOnRemoveFile}\r\n        >\r\n          {({ file }) => (\r\n            <aside\r\n              style={{\r\n                display: 'flex',\r\n                flexDirection: 'row',\r\n                marginBottom: 10\r\n              }}\r\n            >\r\n              <button\r\n                type='button'\r\n                onClick={this.handleOpenDialog}\r\n                style={{\r\n                  borderRadius: 0,\r\n                  marginLeft: 0,\r\n                  marginRight: 0,\r\n                  width: '30%',\r\n                  paddingLeft: 0,\r\n                  paddingRight: 0,\r\n                }}\r\n              >\r\n                {language.browseButton[this.context.language]}\r\n              </button>\r\n              <div\r\n                style={{\r\n                  borderWidth: 1,\r\n                  borderStyle: 'solid',\r\n                  borderColor: '#ccc',\r\n                  height: 45,\r\n                  lineHeight: 2.5,\r\n                  marginTop: 5,\r\n                  marginBottom: 5,\r\n                  paddingLeft: 13,\r\n                  paddingTop: 3,\r\n                  width: '60%'\r\n                }}\r\n              >\r\n                {file && file.name}\r\n              </div>\r\n              <button\r\n                style={{\r\n                  borderRadius: 0,\r\n                  marginLeft: 0,\r\n                  marginRight: 0,\r\n                  paddingLeft: 20,\r\n                  paddingRight: 20,\r\n                  display: 'flex',\r\n                  justifyContent: 'center',\r\n                }}\r\n                onClick={this.handleRemoveFile}\r\n              >\r\n                {language.removeButton[this.context.language]}\r\n              </button>\r\n            </aside>\r\n          )}\r\n        </CSVReader>\r\n        <button onClick={this.confirmSubmit.bind(this)}\r\n          style={{\r\n            textAlign: \"center\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >{language.fillFormButton[this.context.language]}</button>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default AddCandidates;"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _toConsumableArray from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import language from\"../../properties/language\";import axios from\"axios\";import{endpoint}from\"../../api\";import{UserContext}from\"../../context/userContext\";import Swal from\"sweetalert2\";import DefaultInput from\"../../components/defaultInput\";import DefaultButton from\"../../components/defaultButton\";import{DARK_GREEN,GREEN,WHITE}from\"../../helpers/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var FromValueItem=function FromValueItem(props){return/*#__PURE__*/_jsxs(\"label\",{onClick:function onClick(){return props.handleClick(props.value);},className:\"boxContainer\",children:[/*#__PURE__*/_jsx(\"span\",{className:props.isActive?\"checkActive\":\"checkPassive\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontSize:14,textAlign:\"center\",display:\"flex\",justifyContent:\"center\"},children:props.value})]});};export var FormValueContainer=function FormValueContainer(props){var staticValue=[-2,-1,0,1,2];return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",fontSize:14},children:staticValue.map(function(value,idx){return/*#__PURE__*/_jsx(FromValueItem,{value:value,isActive:props.answer===value,question:props.answer,idx:idx,handleClick:function handleClick(value){return props.handleClick(value,props.idx);}});})});};var Form=/*#__PURE__*/function(_Component){_inherits(Form,_Component);var _super=_createSuper(Form);function Form(props){var _this;_classCallCheck(this,Form);_this=_super.call(this,props);_this.handleChange=function(e){_this.state.answersDesc[e.currentTarget.name]=e.currentTarget.value;};_this.handleSubmit=function(e){e.preventDefault();if(_this.context.user!==\"Quest\"){axios.post(endpoint.send,{ans:_this.state.answers,desc:_this.state.answersDesc,email:_this.context.email,studentAssociation:_this.context.path},{headers:{Authorization:\"Bearer \".concat(_this.context.token)}}).then(function(res){console.log(res);Swal.fire({title:res.data/*language.filledFormAlert[this.context.language]*/,//  TEXT AND ICON DEFINITION FROM SERVER ROW 308\nicon:res.data.includes(\"Error\")?\"error\":\"success\",confirmButtonText:language.continueHolder[_this.context.language]});});}else{_this.props.history.push({pathname:\"/suggestedCandidates\",data:{answers:_this.state.answers,studentAssociation:_this.state.path}});}};_this.handleClick=function(value,idx){var oldAnswers=_toConsumableArray(_this.state.answers);oldAnswers[idx]=parseInt(value);_this.setState({answers:_toConsumableArray(oldAnswers)});// let sum = this.state.answers.reduce((result, number) => result + number);\n// console.log(sum);\n};_this.state={questions:[],answers:[],answersDesc:[],filledFormQuestion:[],area:\"\",path:_this.props.location.pathname.split(\"/\")[2],loader:true,required:true};return _this;}_createClass(Form,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.state.path);var email=this.props.location.email;if(this.context.loggedIn){{console.log(endpoint.questions);}axios.post(endpoint.questions,{data:this.state.path}).then(function(res){console.log(res);_this2.setState({questions:res.data});axios.post(endpoint.fillForm,{data:email}).then(function(response){console.log(response);var oldQuestions=res.data;var questionDesc=[];var questionNumber=[];oldQuestions.map(function(question,idx){console.log(\"question\");console.log(question);console.log(\"idx\");console.log(idx);Object.assign(oldQuestions[idx],{questionValue:Object.values(response.data.filledForm).filter(function(item){return isNaN(item);})[idx],questionNumber:Object.values(response.data.filledForm).filter(function(item){return!isNaN(item);})[idx]});questionDesc.push(Object.values(response.data.filledForm).filter(function(item){return isNaN(item);})[idx]);questionNumber.push(Object.values(response.data.filledForm).filter(function(item){return!isNaN(item);})[idx]);});_this2.setState({questions:oldQuestions});_this2.setState({answersDesc:questionDesc,answers:questionNumber});_this2.setState({loader:false});});});}else{{console.log(endpoint.questions);}axios.post(endpoint.questions,{data:this.state.path}).then(function(res){_this2.setState({loader:false});_this2.setState({questions:res.data});});}}},{key:\"isQuest\",value:function isQuest(counter){if(this.context.user!==\"Quest\"){return/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:counter,placeholder:\"Explain your choice\",style:{marginBottom:\"41px\",width:\"50%\"},onChange:this.handleChange,required:this.state.required// disabled={this.state.disabled}\n});}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"homeScreen\",style:{display:\"flex\",justifyContent:\"center\",flexDirection:\"column\",maxWidth:500,marginLeft:\"auto\",marginRight:\"auto\"},children:this.state.loader?/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\"},children:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Waiting for data...\"})}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmit,children:[this.state.questions&&React.Children.toArray(this.state.questions.map(function(question,idx){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"questionSet\",children:[/*#__PURE__*/_jsxs(\"label\",{style:{fontSize:16},children:[/*#__PURE__*/_jsx(\"strong\",{children:language.questionHolder[_this3.context.language]}),{fin:question.questionFin,eng:question.question,swe:question.questionSwe}[_this3.context.language]]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",fontSize:14},children:[/*#__PURE__*/_jsx(\"span\",{children:language.disagreeButton[_this3.context.language]}),/*#__PURE__*/_jsx(\"span\",{className:\"agg\",children:language.agreeButton[_this3.context.language]})]}),_this3.state.answers&&/*#__PURE__*/_jsx(FormValueContainer,{answer:_this3.state.answers[idx],idx:idx,handleClick:function handleClick(value,idx){return _this3.handleClick(value,idx);}}),_this3.context.user!==\"Quest\"&&_this3.state.answersDesc&&/*#__PURE__*/_jsx(DefaultInput,{label:\"Explain your choice\",type:\"text\",name:idx,value:_this3.state.answersDesc[idx],onChange:_this3.handleChange// disabled={this.state.disabled}\n,required:_this3.state.required})]})});})),/*#__PURE__*/_jsx(DefaultButton,{type:\"submit\",borderColor:DARK_GREEN,backgroundColor:GREEN,textColor:WHITE,text:language.fillFormButton[this.context.language]})]})});}}]);return Form;}(Component);Form.contextType=UserContext;export default Form;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/form/index.jsx"],"names":["React","Component","language","axios","endpoint","UserContext","Swal","DefaultInput","DefaultButton","DARK_GREEN","GREEN","WHITE","FromValueItem","props","handleClick","value","isActive","fontSize","textAlign","display","justifyContent","FormValueContainer","staticValue","map","idx","answer","Form","handleChange","e","state","answersDesc","currentTarget","name","handleSubmit","preventDefault","context","user","post","send","ans","answers","desc","email","studentAssociation","path","headers","Authorization","token","then","res","console","log","fire","title","data","icon","includes","confirmButtonText","continueHolder","history","push","pathname","oldAnswers","parseInt","setState","questions","filledFormQuestion","area","location","split","loader","required","loggedIn","fillForm","response","oldQuestions","questionDesc","questionNumber","question","Object","assign","questionValue","values","filledForm","filter","item","isNaN","counter","marginBottom","width","flexDirection","maxWidth","marginLeft","marginRight","Children","toArray","questionHolder","fin","questionFin","eng","swe","questionSwe","disagreeButton","agreeButton","fillFormButton","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport language from \"../../properties/language\";\r\nimport axios from \"axios\";\r\nimport { endpoint } from \"../../api\";\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport Swal from \"sweetalert2\";\r\nimport DefaultInput from \"../../components/defaultInput\";\r\nimport DefaultButton from \"../../components/defaultButton\";\r\nimport { DARK_GREEN, GREEN, WHITE } from \"../../helpers/constants\";\r\n\r\nexport const FromValueItem = (props) => {\r\n  return (\r\n    <label\r\n      onClick={() => props.handleClick(props.value)}\r\n      className=\"boxContainer\"\r\n    >\r\n      <span className={props.isActive ? \"checkActive\" : \"checkPassive\"}></span>\r\n      <span\r\n        style={{\r\n          fontSize: 14,\r\n          textAlign: \"center\",\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        {props.value}\r\n      </span>\r\n    </label>\r\n  );\r\n};\r\n\r\nexport const FormValueContainer = (props) => {\r\n  const staticValue = [-2, -1, 0, 1, 2];\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        fontSize: 14,\r\n      }}\r\n    >\r\n      {staticValue.map((value, idx) => (\r\n        <FromValueItem\r\n          value={value}\r\n          isActive={props.answer === value}\r\n          question={props.answer}\r\n          idx={idx}\r\n          handleClick={(value) => props.handleClick(value, props.idx)}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nclass Form extends Component {\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      questions: [],\r\n      answers: [],\r\n      answersDesc: [],\r\n      filledFormQuestion: [],\r\n      area: \"\",\r\n      path: this.props.location.pathname.split(\"/\")[2],\r\n      loader: true,\r\n      required: true,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.state.path);\r\n    let email = this.props.location.email;\r\n    if (this.context.loggedIn) {\r\n      {\r\n        console.log(endpoint.questions);\r\n      }\r\n      axios.post(endpoint.questions, { data: this.state.path }).then((res) => {\r\n        console.log(res);\r\n        this.setState({ questions: res.data });\r\n        axios.post(endpoint.fillForm, { data: email }).then((response) => {\r\n          console.log(response);\r\n          let oldQuestions = res.data;\r\n          let questionDesc = [];\r\n          let questionNumber = [];\r\n          oldQuestions.map((question, idx) => {\r\n            console.log(\"question\");\r\n            console.log(question);\r\n            console.log(\"idx\");\r\n            console.log(idx);\r\n            Object.assign(oldQuestions[idx], {\r\n              questionValue: Object.values(response.data.filledForm).filter(\r\n                (item) => isNaN(item)\r\n              )[idx],\r\n              questionNumber: Object.values(response.data.filledForm).filter(\r\n                (item) => !isNaN(item)\r\n              )[idx],\r\n            });\r\n            questionDesc.push(\r\n              Object.values(response.data.filledForm).filter((item) =>\r\n                isNaN(item)\r\n              )[idx]\r\n            );\r\n            questionNumber.push(\r\n              Object.values(response.data.filledForm).filter(\r\n                (item) => !isNaN(item)\r\n              )[idx]\r\n            );\r\n          });\r\n          this.setState({ questions: oldQuestions });\r\n          this.setState({\r\n            answersDesc: questionDesc,\r\n            answers: questionNumber,\r\n          });\r\n          this.setState({ loader: false });\r\n        });\r\n      });\r\n    } else {\r\n      {\r\n        console.log(endpoint.questions);\r\n      }\r\n      axios.post(endpoint.questions, { data: this.state.path }).then((res) => {\r\n        this.setState({ loader: false });\r\n        this.setState({ questions: res.data });\r\n      });\r\n    }\r\n  }\r\n\r\n  isQuest(counter) {\r\n    if (this.context.user !== \"Quest\") {\r\n      return (\r\n        <input\r\n          type=\"text\"\r\n          name={counter}\r\n          placeholder=\"Explain your choice\"\r\n          style={{ marginBottom: \"41px\", width: \"50%\" }}\r\n          onChange={this.handleChange}\r\n          required={this.state.required}\r\n          // disabled={this.state.disabled}\r\n        />\r\n      );\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    this.state.answersDesc[e.currentTarget.name] = e.currentTarget.value;\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (this.context.user !== \"Quest\") {\r\n      axios\r\n        .post(\r\n          endpoint.send,\r\n          {\r\n            ans: this.state.answers,\r\n            desc: this.state.answersDesc,\r\n            email: this.context.email,\r\n            studentAssociation: this.context.path,\r\n          },\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${this.context.token}`,\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res);\r\n          Swal.fire({\r\n            title: res.data /*language.filledFormAlert[this.context.language]*/, //  TEXT AND ICON DEFINITION FROM SERVER ROW 308\r\n            icon: res.data.includes(\"Error\") ? \"error\" : \"success\",\r\n            confirmButtonText: language.continueHolder[this.context.language],\r\n          });\r\n        });\r\n    } else {\r\n      this.props.history.push({\r\n        pathname: \"/suggestedCandidates\",\r\n        data: {\r\n          answers: this.state.answers,\r\n          studentAssociation: this.state.path,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  handleClick = (value, idx) => {\r\n    const oldAnswers = [...this.state.answers];\r\n    oldAnswers[idx] = parseInt(value);\r\n    this.setState({\r\n      answers: [...oldAnswers],\r\n    });\r\n    // let sum = this.state.answers.reduce((result, number) => result + number);\r\n    // console.log(sum);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"homeScreen\"\r\n        style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          flexDirection: \"column\",\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n        }}\r\n      >\r\n        {this.state.loader ? (\r\n          <div style={{ display: \"flex\" }}>\r\n            <p style={{ textAlign: \"center\" }}>Waiting for data...</p>\r\n          </div>\r\n        ) : (\r\n          <form onSubmit={this.handleSubmit}>\r\n            {this.state.questions &&\r\n              React.Children.toArray(\r\n                this.state.questions.map((question, idx) => (\r\n                  <>\r\n                    <div className=\"questionSet\">\r\n                      <label style={{ fontSize: 16 }}>\r\n                        <strong>\r\n                          {language.questionHolder[this.context.language]}\r\n                        </strong>\r\n                        {\r\n                          {\r\n                            fin: question.questionFin,\r\n                            eng: question.question,\r\n                            swe: question.questionSwe,\r\n                          }[this.context.language]\r\n                        }\r\n                      </label>\r\n\r\n                      <div\r\n                        style={{\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-between\",\r\n                          fontSize: 14,\r\n                        }}\r\n                      >\r\n                        <span>\r\n                          {language.disagreeButton[this.context.language]}\r\n                        </span>\r\n                        <span className=\"agg\">\r\n                          {language.agreeButton[this.context.language]}\r\n                        </span>\r\n                      </div>\r\n\r\n                      {this.state.answers && (\r\n                        <FormValueContainer\r\n                          answer={this.state.answers[idx]}\r\n                          idx={idx}\r\n                          handleClick={(value, idx) =>\r\n                            this.handleClick(value, idx)\r\n                          }\r\n                        />\r\n                      )}\r\n\r\n                      {this.context.user !== \"Quest\" && this.state.answersDesc && (\r\n                        <DefaultInput\r\n                          label=\"Explain your choice\"\r\n                          type=\"text\"\r\n                          name={idx}\r\n                          value={this.state.answersDesc[idx]}\r\n                          onChange={this.handleChange}\r\n                          // disabled={this.state.disabled}\r\n                          required={this.state.required}\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </>\r\n                ))\r\n              )}\r\n\r\n            <DefaultButton\r\n              type=\"submit\"\r\n              borderColor={DARK_GREEN}\r\n              backgroundColor={GREEN}\r\n              textColor={WHITE}\r\n              text={language.fillFormButton[this.context.language]}\r\n            />\r\n          </form>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Form;\r\n"]},"metadata":{},"sourceType":"module"}
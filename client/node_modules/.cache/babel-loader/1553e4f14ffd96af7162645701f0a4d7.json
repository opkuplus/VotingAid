{"ast":null,"code":"import _classCallCheck from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Git/VotingAid-1/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from\"axios\";import swal from\"sweetalert2\";import{CSVReader}from'react-papaparse';import{UserContext}from\"../../context/userContext\";import language from\"../../properties/language\";import{endpoint}from'../../api';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var buttonRef=/*#__PURE__*/React.createRef();var AddCandidates=/*#__PURE__*/function(_Component){_inherits(AddCandidates,_Component);var _super=_createSuper(AddCandidates);function AddCandidates(props){var _this;_classCallCheck(this,AddCandidates);_this=_super.call(this,props);_this.handleOpenDialog=function(e){// Note that the ref is set async, so it might be null at some point\nif(buttonRef.current){buttonRef.current.open(e);}};_this.handleOnFileLoad=function(data,file){_this.setState({filename:file.name});if(file.name.includes('.csv')){_this.setState({candidates:null});//Reset the state\n_this.setState({candidates:data});}else{console.log('NOT CSV');}};_this.handleOnError=function(err,file,inputElem,reason){console.log(err);};_this.handleRemoveFile=function(e){// Note that the ref is set async, so it might be null at some point\nif(buttonRef.current){buttonRef.current.removeFile(e);_this.setState({candidates:null});console.log(_this.state.candiates);}};_this.state={filename:null,candidates:[]};return _this;}_createClass(AddCandidates,[{key:\"confirmSubmit\",value:function confirmSubmit(){var _this2=this;swal.fire({title:'Caution!',text:language.addCandidatesCautionHolder[this.context.language],icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:language.continueHolder[this.context.language]}).then(function(result){if(result.isConfirmed){_this2.handeSubmit();swal.fire(language.addedCandidatesToDatabaseAlert[_this2.context.language]);}});}},{key:\"handeSubmit\",value:function handeSubmit(){if(this.state.filename.includes('.csv')){axios.post(endpoint.addCandidates,{candidate:this.state.candidates}).then(function(res){console.log('YEET');});}else{alert('Cant upload a file that is not a CSV one');}}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"addCan\",style:{marginTop:20,maxWidth:500,marginLeft:\"auto\",marginRight:\"auto\",backgroundColor:\"#FFFFFF\",padding:15},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\" \",language.manyCandidates[this.context.language]]}),/*#__PURE__*/_jsx(CSVReader,{ref:buttonRef,onFileLoad:this.handleOnFileLoad,onError:this.handleOnError,onSubmit:this.handleOnSubmit,noClick:true,noDrag:true,config:{header:true},onRemoveFile:this.handleOnRemoveFile,children:function children(_ref){var file=_ref.file;return/*#__PURE__*/_jsxs(\"aside\",{style:{display:'flex',flexDirection:'row',marginBottom:10},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:_this3.handleOpenDialog,style:{borderRadius:0,marginLeft:0,marginRight:0,width:'30%',paddingLeft:0,paddingRight:0},children:language.browseButton[_this3.context.language]}),/*#__PURE__*/_jsx(\"div\",{style:{borderWidth:1,borderStyle:'solid',borderColor:'#ccc',height:45,lineHeight:2.5,marginTop:5,marginBottom:5,paddingLeft:13,paddingTop:3,width:'60%'},children:file&&file.name}),/*#__PURE__*/_jsx(\"button\",{style:{borderRadius:0,marginLeft:0,marginRight:0,paddingLeft:20,paddingRight:20,display:'flex',justifyContent:'center'},onClick:_this3.handleRemoveFile,children:language.removeButton[_this3.context.language]})]});}}),/*#__PURE__*/_jsx(\"button\",{onClick:this.confirmSubmit.bind(this),style:{textAlign:\"center\",display:\"flex\",justifyContent:\"center\",marginLeft:\"auto\",marginRight:\"auto\"},children:language.fillFormButton[this.context.language]})]});}}]);return AddCandidates;}(Component);AddCandidates.contextType=UserContext;export default AddCandidates;","map":{"version":3,"sources":["C:/Git/VotingAid-1/client/src/containers/addCandidates/index.js"],"names":["React","Component","axios","swal","CSVReader","UserContext","language","endpoint","buttonRef","createRef","AddCandidates","props","handleOpenDialog","e","current","open","handleOnFileLoad","data","file","setState","filename","name","includes","candidates","console","log","handleOnError","err","inputElem","reason","handleRemoveFile","removeFile","state","candiates","fire","title","text","addCandidatesCautionHolder","context","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","continueHolder","then","result","isConfirmed","handeSubmit","addedCandidatesToDatabaseAlert","post","addCandidates","candidate","res","alert","marginTop","maxWidth","marginLeft","marginRight","backgroundColor","padding","manyCandidates","handleOnSubmit","header","handleOnRemoveFile","display","flexDirection","marginBottom","borderRadius","width","paddingLeft","paddingRight","browseButton","borderWidth","borderStyle","borderColor","height","lineHeight","paddingTop","justifyContent","removeButton","confirmSubmit","bind","textAlign","fillFormButton","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\"\r\nimport swal from \"sweetalert2\"\r\nimport { CSVReader } from 'react-papaparse'\r\nimport { UserContext } from \"../../context/userContext\";\r\nimport language from \"../../properties/language\";\r\nimport { endpoint } from '../../api';\r\n\r\nconst buttonRef = React.createRef()\r\nclass AddCandidates extends Component {\r\n  static contextType = UserContext;\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      filename: null,\r\n      candidates: [],\r\n    }\r\n  }\r\n  handleOpenDialog = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.open(e)\r\n    }\r\n  }\r\n\r\n  handleOnFileLoad = (data, file) => {\r\n    this.setState({ filename: file.name })\r\n    if (file.name.includes('.csv')) {\r\n      this.setState({ candidates: null }); //Reset the state\r\n      this.setState({ candidates: data });\r\n    }\r\n    else {\r\n      console.log('NOT CSV');\r\n    }\r\n  }\r\n\r\n  handleOnError = (err, file, inputElem, reason) => {\r\n    console.log(err)\r\n  }\r\n\r\n  handleRemoveFile = (e) => {\r\n    // Note that the ref is set async, so it might be null at some point\r\n    if (buttonRef.current) {\r\n      buttonRef.current.removeFile(e)\r\n      this.setState({ candidates: null })\r\n      console.log(this.state.candiates);\r\n    }\r\n  }\r\n\r\n  confirmSubmit() {\r\n    swal.fire({\r\n      title: 'Caution!',\r\n      text: language.addCandidatesCautionHolder[this.context.language],\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: language.continueHolder[this.context.language]\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.handeSubmit();\r\n        swal.fire(\r\n          language.addedCandidatesToDatabaseAlert[this.context.language]\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n  handeSubmit() {\r\n    if (this.state.filename.includes('.csv')) {\r\n      axios.post(endpoint.addCandidates, { candidate: this.state.candidates })\r\n        .then(res => {\r\n          console.log('YEET');\r\n        });\r\n    }\r\n    else {\r\n      alert('Cant upload a file that is not a CSV one');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"addCan\"\r\n        style={{\r\n          marginTop: 20,\r\n          maxWidth: 500,\r\n          marginLeft: \"auto\",\r\n          marginRight: \"auto\",\r\n          backgroundColor: \"#FFFFFF\",\r\n          padding: 15,\r\n        }}\r\n      >\r\n        <p> {language.manyCandidates[this.context.language]}</p>\r\n        <CSVReader\r\n          ref={buttonRef}\r\n          onFileLoad={this.handleOnFileLoad}\r\n          onError={this.handleOnError}\r\n          onSubmit={this.handleOnSubmit}\r\n          noClick\r\n          noDrag\r\n          config={{ header: true }}\r\n          onRemoveFile={this.handleOnRemoveFile}\r\n        >\r\n          {({ file }) => (\r\n            <aside\r\n              style={{\r\n                display: 'flex',\r\n                flexDirection: 'row',\r\n                marginBottom: 10\r\n              }}\r\n            >\r\n              <button\r\n                type='button'\r\n                onClick={this.handleOpenDialog}\r\n                style={{\r\n                  borderRadius: 0,\r\n                  marginLeft: 0,\r\n                  marginRight: 0,\r\n                  width: '30%',\r\n                  paddingLeft: 0,\r\n                  paddingRight: 0,\r\n                }}\r\n              >\r\n                {language.browseButton[this.context.language]}\r\n              </button>\r\n              <div\r\n                style={{\r\n                  borderWidth: 1,\r\n                  borderStyle: 'solid',\r\n                  borderColor: '#ccc',\r\n                  height: 45,\r\n                  lineHeight: 2.5,\r\n                  marginTop: 5,\r\n                  marginBottom: 5,\r\n                  paddingLeft: 13,\r\n                  paddingTop: 3,\r\n                  width: '60%'\r\n                }}\r\n              >\r\n                {file && file.name}\r\n              </div>\r\n              <button\r\n                style={{\r\n                  borderRadius: 0,\r\n                  marginLeft: 0,\r\n                  marginRight: 0,\r\n                  paddingLeft: 20,\r\n                  paddingRight: 20,\r\n                  display: 'flex',\r\n                  justifyContent: 'center',\r\n                }}\r\n                onClick={this.handleRemoveFile}\r\n              >\r\n                {language.removeButton[this.context.language]}\r\n              </button>\r\n            </aside>\r\n          )}\r\n        </CSVReader>\r\n        <button onClick={this.confirmSubmit.bind(this)}\r\n          style={{\r\n            textAlign: \"center\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginLeft: \"auto\",\r\n            marginRight: \"auto\",\r\n          }}\r\n        >{language.fillFormButton[this.context.language]}</button>\r\n      </div >\r\n    )\r\n  }\r\n}\r\nexport default AddCandidates;"]},"metadata":{},"sourceType":"module"}
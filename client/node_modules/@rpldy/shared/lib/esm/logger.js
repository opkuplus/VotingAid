import { DEBUG_LOG_KEY } from "./consts";
import hasWindow from "./utils/hasWindow";
import { isProduction } from "./utils";
let isDebug;

const isEnvDebug = () => {
  var _process, _process$env;

  return !isProduction() && ((_process = process) === null || _process === void 0 ? void 0 : (_process$env = _process.env) === null || _process$env === void 0 ? void 0 : _process$env.DEBUG);
};

const isDebugOn = () => {
  if (typeof isDebug !== "boolean") {
    isDebug = isEnvDebug() || hasWindow() && ("location" in window && !!~window.location.search.indexOf("rpldy_debug=true") || window[DEBUG_LOG_KEY] === true);
  }

  return isDebug;
};

const setDebug = debugOn => {
  if (hasWindow()) {
    window[DEBUG_LOG_KEY] = debugOn;
  }

  isDebug = debugOn ? true : null;
};

const debugLog = (...args) => {
  if (isDebugOn()) {
    // eslint-disable-next-line no-console
    console.log(...args);
  }
};

export { isDebugOn, setDebug, debugLog };